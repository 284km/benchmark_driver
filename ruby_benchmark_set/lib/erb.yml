- name: ERB compiling
  prelude: |
    require 'erb'

    title = "hello world!"
    content = "hello world!\n" * 10

    data = <<EOS
    <html>
      <head> <%= title %> </head>
      <body>
        <h1> <%= title %> </h1>
        <p>
          <%= content %>
        </p>
      </body>
    </html>
    EOS

  benchmark: ERB.new(data).src

- name: ERB rendering
  prelude: |
    require 'erb'

    title = "hello world!"
    content = "hello world!\n" * 10

    data = <<EOS
    <html>
      <head> <%= title %> </head>
      <body>
        <h1> <%= title %> </h1>
        <p>
          <%= content %>
        </p>
      </body>
    </html>
    EOS

    src = "def self.render(title, content); #{ERB.new(data).src}; end"
    mod = Module.new
    mod.instance_eval(src, "(ERB)")

  benchmark: mod.render(title, content)
